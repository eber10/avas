---
import Image from "astro/components/Image.astro";
const { slides } = Astro.props;
const primaryBlue = '#143663'; 
---
<section class="relative w-full overflow-hidden h-[400px]">
    {/* CONTENEDOR DEL SLIDER DE IMÁGENES */}
    <div id="hero-slider-container" class="relative w-full h-full">
        {slides.map((slide, index) => (
            <div 
                class={`absolute inset-0 w-full h-full transition-opacity duration-1000 ease-in-out ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
                data-slide-index={index}
            >
                <Image 
                    src={slide.image} 
                    alt={slide.alt} 
                    class="w-full h-full object-cover object-center" 
                    widths={[400, 768, 1280, 1920]} 
                    sizes="(max-width: 768px) 100vw, 1920px"
                    loading="eager"
                />
            </div>
        ))}
    </div>
    {/* PAGINACIÓN / INDICADORES DEL SLIDER (PUNTOS) */}
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 pointer-events-auto">
        {slides.map((_, index) => (
            <button 
                class={`w-3 h-3 rounded-full bg-gray-400 transition-colors duration-300 ${index === 0 ? 'bg-black' : ''}`}
                style={index === 0 ? `background-color: ${primaryBlue};` : ''}
                data-pagination-index={index}
                aria-label={`Ir al slide ${index + 1}`}
            ></button>
        ))}
    </div>
</section>
{/* SCRIPTS PARA EL SLIDER */}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const slides = document.querySelectorAll('[data-slide-index]');
        const paginationDots = document.querySelectorAll('[data-pagination-index]'); 
        let currentIndex = 0;
        const intervalTime = 5000; // 5 segundos para el cambio

        function showSlide(index) {
            slides.forEach((slide, i) => {
                const isActive = i === index;
                slide.classList.toggle('opacity-100', isActive);
                slide.classList.toggle('opacity-0', !isActive);
            });

            // Actualiza los puntos de paginación
            paginationDots.forEach((dot, i) => {
                const isActive = i === index;
                dot.style.backgroundColor = isActive ? '#143663' : '#a0a0a0'; 
            });
        }

        function nextSlide() {
            currentIndex = (currentIndex + 1) % slides.length;
            showSlide(currentIndex);
        }

        // Permitir navegación manual haciendo clic en los puntos
        paginationDots.forEach(dot => {
            dot.addEventListener('click', (event) => {
                const index = parseInt(event.target.dataset.paginationIndex);
                currentIndex = index;
                showSlide(currentIndex);
            });
        });

        // Iniciar el cambio automático de slides
        setInterval(nextSlide, intervalTime);
    });
</script>